{
  "name": "version-everything",
  "version": "1.2.0",
  "description": "Version everything with npm",
  "version_files": [
    "README.md",
    "example_wordpress_plugin.php",
    "example_wordpress_theme.css",
    "manifest.json"
  ],
  "scripts": {
    "dump-vars": "node dump-vars.js",
    "env": "env",
    "version": "node -e \"eval(require('./package.json').version_script_src.join(''))\" && git add -u"
  },
  "author": {
    "name": "Joe Maller",
    "email": "joe@joemaller.com",
    "url": "http://www.joemaller.com"
  },
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/joemaller/version-everything-with-npm"
  },
  "private": true,
  "devDependencies": {
    "jsonfile": "^2.4.0",
    "shelljs": "^0.7.4"
  },
  "version_script_src": [
    "const sed = require('shelljs').sed;",
    "const jsonfile = require('jsonfile');",
    "const pkg = require('./package.json');",
    "pkg.version_files.forEach(f => {",
    "  jsonfile.readFile(f, (err, data) => {",
    "    if (err) {",
    "     sed('-i', /^([# ]*Version: ).*/, `$1${ pkg.version }`, f);",
    "    } else  {",
    "      data.version = pkg.version;",
    "      jsonfile.writeFileSync(f, data, {spaces: 2});",
    "    }",
    "  });",
    "});"
  ]
}
